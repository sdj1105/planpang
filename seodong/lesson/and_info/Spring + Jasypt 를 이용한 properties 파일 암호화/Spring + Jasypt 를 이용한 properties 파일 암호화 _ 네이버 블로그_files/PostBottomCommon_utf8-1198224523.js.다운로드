if(typeof nhn=="undefined"){nhn={}}postCommon.PhotoImageViewer=$Class({$init:function(){this._ref=[];this.tid=null;this.tidTimeout=null;this.opt={imageMax:[964,964],marginTop:"50px",target:parent,ndsurl:"",popupurl:"http://alpha.common.photo.naver.com/storyphoto",allowRightMouseClick:true};var b=arguments[0]||{};for(var a in b){this.opt[a]=b[a]}this.elViewer=null;this.welViewer=null;this.elViewerTopFrame=null;this.welTabNaviFrame=null;this.welPhotoCountFrame=null;this.elCountCurrentFrame=null;this.elCountTotalFrame=null;this.elNdsIframe=null;this.elViewerCloseButton=null;this.elViewerPrevButton=null;this.elViewerNextButton=null;this.elViewerOriginalButton=null;this.oTid_initialFunction=null;this.oTid_imageLoadFunction=null;this._bDragUsed=false;this._bPrevButton=this._bNextButton=true;this._count=0;this._no=0;this._imageWidthMin=0;this._imageHeightMin=0;this._orginalViewFlag=false;this._mousewheel_lock=false;this._oImageWidthMin={single:170,more:350};this.welImageAnchor=null;this._oImageHeightMin={single:100,more:100};this._nObj={};this._marginTop=this.opt.marginTop;this.getCursorStyle=function(){return $Agent().navigator().IE==true?"hand":"pointer"};this.appendViewerDiv();this.getButtonDiv();this.appendDragging();this.wfKeydown=$Fn(this._onKeyDown,this);this._setEvent()},setPreButtonStatus:function(){if(this._bPrevButton==true){this.setButtonStyleChangeBackground2(this.elViewerPrevButton,"btn_left.gif")}else{this.setButtonStyleChangeBackground2(this.elViewerPrevButton,"btn_left_off.gif")}},setNextButtonStatus:function(){if(this._bNextButton==true){this.setButtonStyleChangeBackground2(this.elViewerNextButton,"btn_right.gif")}else{this.setButtonStyleChangeBackground2(this.elViewerNextButton,"btn_right_off.gif")}},setButtonStyleChangeBackground:function(b,a){b.style.background="url('http://blogimgs.naver.com/blog20/blog/layout_photo/viewer2/"+a+"') no-repeat"},setButtonStyleChangeBackground2:function(b,a){b.style.background="url('http://blogimgs.naver.com/blog20/blog/layout_photo/viewer2/"+a+"') no-repeat"},_setEvent:function(){$Fn(this._onMouseWheel,this).attach(this.elViewer,"mousewheel");$Fn(this._onMouseOverOut,this).attach(this.elViewer,"mouseover");$Fn(this._onMouseOverOut,this).attach(this.elViewer,"mouseout");$Fn(this._onMouseDown,this).attach(this.elViewer,"mousedown");$Fn(this._onMouseUp,this).attach(this.elViewer,"mouseup");$Fn(this._onClick,this).attach(this.elViewer,"click");$Fn($Fn(this.unload,this).bind()).attach(window,"unload")},_onMouseWheel:function(a){if(this._mousewheel_lock==false){this._mousewheel_lock=true;setTimeout($Fn(function(){this._mousewheel_lock=false},this).bind(),700);a.mouse().delta<0?this.doNext():this.doPrev()}a.stopBubble()},_onKeyDown:function(a){if(!this.welViewer.visible()){return}if(a.key().left){this.doPrev()}else{if(a.key().right){this.doNext()}}a.stopBubble()},_onMouseDown:function(b){var c=b.element;var a=c.className;if(b.mouse().right==true&&this.opt.allowRightMouseClick==false){alert("마우스 오른쪽 버튼은 사용할 수 없습니다. ");return}switch(a){case"_btn_left":if(this._bPrevButton==false){sImg="btn_left_off.gif"}else{sImg="btn_left_down.gif"}this.setButtonStyleChangeBackground(c,sImg);b.stopBubble();break;case"_btn_right":if(this._bNextButton==false){sImg="btn_right_off.gif"}else{sImg="btn_right_down.gif"}this.setButtonStyleChangeBackground(c,sImg);b.stopBubble();break;case"_btn_close":this.setButtonStyleChangeBackground(c,"btn_close_down.gif");b.stopBubble();break;default:break}},_onMouseUp:function(b){var c=b.element;var a=c.className;switch(a){case"_btn_left":if(this._bPrevButton==false){sImg="btn_left_off.gif"}else{sImg="btn_left.gif"}this.setButtonStyleChangeBackground(c,sImg);b.stopBubble();break;case"_btn_right":if(this._bNextButton==false){sImg="btn_right_off.gif"}else{sImg="btn_right.gif"}this.setButtonStyleChangeBackground(c,sImg);b.stopBubble();break;case"_btn_close":this.setButtonStyleChangeBackground(c,"btn_close.gif");b.stopBubble();break;default:break}},_onClick:function(b){var c=b.element;if(c.tagName.toLowerCase()=="img"){c=c.parentNode}var a=c.className;switch(a){case"_btn_left":this.doPrev();b.stop();break;case"_btn_right":this.doNext();b.stop();break;case"_btn_close":this.doClose();b.stop();break;case"btn_original":this.doOrginalView();break;default:break}if($$.getSingle("! div.photo_album",c)){this.doClose()}b.stopBubble()},_onMouseOverOut:function(b){var d=b.element;var a=d.className;var c="";if(b.type=="mouseout"){if(this.opt.allowRightMouseClick==false){this.opt.target.document.oncontextmenu=new Function("")}switch(a){case"_btn_left":if(this._bPrevButton==false){c="btn_left_off.gif"}else{c="btn_left.gif"}this.setButtonStyleChangeBackground(d,c);break;case"_btn_right":if(this._bNextButton==false){c="btn_right_off.gif"}else{c="btn_right.gif"}this.setButtonStyleChangeBackground(d,c);break;case"photo_album":this.doOrginalView(b.pos(),"disabled");break;case"_btn_close":this.setButtonStyleChangeBackground(d,"btn_close.gif");break;default:break}}else{switch(a){case"_btn_left":if(this._bPrevButton==false){c="btn_left_off.gif"}else{c="btn_left_over.gif"}this.setButtonStyleChangeBackground(d,c);break;case"_btn_right":if(this._bNextButton==false){c="btn_right_off.gif"}else{c="btn_right_over.gif"}this.setButtonStyleChangeBackground(d,c);break;case"photo_album":this.doOrginalView(b.pos(),"enabled");break;case"_btn_close":this.setButtonStyleChangeBackground(d,"btn_close_over.gif");break;default:break}}b.stopBubble()},setNDSControll:function(){if(this.opt.ndsurl){this.elNdsIframe.src=this.opt.ndsurl}},_openImageInNewWindow:function(a){if(a==null||a[0]==null||a[0]==""){return}if(this.welImageAnchor==null){this.welImageAnchor=$Element("<a href='' target='_blank' />")}this.welImageAnchor.attr("href",a[0]);this.welImageAnchor.fireEvent("click",{left:true,middle:false,right:false})},doPlayer:function(a,c,b){if(userAgentUtil.isIPadRequest()){if(b!=true){this.setNDSControll()}this._openImageInNewWindow(a);return}this.wfKeydown.attach(document,"keydown");if(document.createEventObject){this.opt.target.document.body.focus()}else{this.elViewerNextButton.focus()}if(b!=true){this.setNDSControll()}this._imageWidthMin=a.length>1?this._oImageWidthMin.more:this._oImageWidthMin.single;this._imageHeightMin=a.length>1?this._oImageHeightMin.more:this._oImageHeightMin.single;setTimeout($Fn(function(){if(a.length>1){this.welPhotoCountFrame.show();this.welTabNaviFrame.show()}else{this.welPhotoCountFrame.hide();this.welTabNaviFrame.hide()}},this).bind(),20);if(a.length-1>=c){this._ref=a;this._count=a.length-1;this._no=c;if($("photoview")&&$Element($("photoviewer")).visible()){if($("photoview").src.indexOf(this._ref[this._no])>-1){return}}this.display()}},doClose:function(){this.wfKeydown.detach(this.opt.target.document,"keydown");this.wfKeydown.detach(document,"keydown");if(this.tid){clearTimeout(this.tid)}if(this.tidTimeout){clearTimeout(this.tidTimeout)}this.welPhotoCountFrame.hide();this.welTabNaviFrame.hide();this.welViewer.hide();this.closeSafeLayer()},doPrev:function(){if(this._bPrevButton==false){return}this.setNDSControll();this._no--;this._no<0?this._no=0:this.display()},doNext:function(){if(!this._bNextButton){return}this.setNDSControll();this._no++;this._no>this._count?this._no=this._count:this.display()},_onMotionViewerReady:function(k,h,d,b){var f=$Agent().navigator();this._finishedX=null;this._finishedY=null;this._finishedScrollX=null;this._finishedScrollY=null;this._sourceX=k.sourceX;this._sourceY=k.sourceY;this._targetX=k.targetX;this._targetY=k.targetY;this._left=k.left;this._oldScrollLeft=h;this._frameDelayTime=0.18;this._heightBugId=$$.getSingle("table",this.elViewerImgFrame);this._bodyOffsetWidth=(f.IE==false?this.opt.target.document.documentElement.offsetWidth:this.opt.target.document.documentElement.offsetWidth-20);this._isScroll=true;this._isCenterScroll=true;this._isRight=false;if(f.IE&&f.version=="5.5"){var a=this.opt.target.document.body.scrollTop==0?this.opt.target.document.body.scrollTop:this.opt.target.document.body.scrollTop;var c=this.opt.target.document.body.scrollLeft==0?this.opt.target.document.body.scrollLeft:this.opt.target.document.body.scrollLeft;var l=f.IE==true?this.opt.target.document.body.clientWidth:window.innerWidth;l=l+c;var g=f.IE==true?this.opt.target.document.body.clientHeight:window.innerHeight}else{var a=this._getCalculatedScrollTop(this.opt.target.document);var c=this.opt.target.document.body.scrollLeft==0?this.opt.target.document.documentElement.scrollLeft:this.opt.target.document.body.scrollLeft;var l=f.IE==true?this.opt.target.document.documentElement.clientWidth:window.innerWidth;l=l+c;var g=f.IE==true?this.opt.target.document.documentElement.clientHeight:window.innerHeight}if(d>=a&&a+g>=d&&h>=c&&h<=l&&this._bDragUsed==true&&this.welViewer.visible()){this._isCenterScroll=false}var j=this.getPosCenter(this._targetX,this._targetY);if(this._isCenterScroll==false){this._sourceScrollX=this._left}else{this._sourceScrollX=h==0?j.left:h}if(this._isCenterScroll==false){this._targetScrollX=this._left-(this._targetX/2-this._sourceX/2)}else{if(f.IE55){this._targetScrollX=this.opt.target.document.body.clientWidth/2-(this._targetX/2)+this.opt.target.document.body.scrollLeft}else{this._targetScrollX=this.opt.target.document.documentElement.clientWidth/2-(this._targetX/2)+this.opt.target.document.documentElement.scrollLeft}}this._sourceScrollY=d;if(f.ie&&f.version=="5.5"){this._targetScrollY=this._getCalculatedScrollTop(this.opt.target.document)+parseInt(this._marginTop,10)}else{this._targetScrollY=this._getCalculatedScrollTop(this.opt.target.document)+parseInt(this._marginTop,10)}if(this.oTidMoveMotion){clearInterval(this.oTidMoveMotion)}this.oTidMoveMotion=setInterval($Fn(this._onMotionViewer,this).bind(),10);this._runFunc=b},_onMotionViewer:function(){var d=$Agent().navigator();if(this._finishedX==null){this._sourceX+=this._frameDelayTime*(this._targetX-this._sourceX)}if(this._finishedY==null){this._sourceY+=this._frameDelayTime*(this._targetY-this._sourceY)}if(this._finishedScrollX==null){this._sourceScrollX+=this._frameDelayTime*(this._targetScrollX-this._sourceScrollX)}if(this._finishedScrollY==null){this._sourceScrollY+=0.3*(this._targetScrollY-this._sourceScrollY)}if(this._isCenterScroll==false){var c=this._sourceScrollX;if(c<0){c=0}}else{if(d.ie&&d.version=="5.5"){var a=this.opt.target.document.body.clientWidth/2-(this._sourceX/2)+this.opt.target.document.body.scrollLeft}else{var a=this.opt.target.document.documentElement.clientWidth/2-(this._sourceX/2)+this.opt.target.document.documentElement.scrollLeft}var c=this._oldScrollLeft==0?a:this._sourceScrollX}this.welViewer.css({display:"block",width:Math.floor(this._sourceX)+"px",height:Math.floor(this._sourceY)+"px",left:parseInt(c,10)+"px"});$Element(this.elViewerImgFrame).css({height:Math.floor(this._sourceY)+"px"});$Element(this._heightBugId).css({height:Math.floor(this._sourceY)+"px"});if(!d.IE||(d.IE&&d.version=="8")){$Element(this.elViewerImgFrame).css({width:Math.floor(this._sourceX-5)+"px"});$Element(this._heightBugId).css({width:Math.floor(this._sourceX-5)+"px"})}if(this._isCenterScroll==true){var b=this._sourceScrollY;this.welViewer.css("top",b+"px")}if(Math.ceil(this._sourceX)==this._targetX||Math.floor(this._sourceX)==this._targetX){this._finishedX=this._targetX}if(Math.ceil(this._sourceY)==this._targetY||Math.floor(this._sourceY)==this._targetY){this._finishedY=this._targetY}if(this._sourceScrollX>=this._targetScrollX-0.5&&this._sourceScrollX<=this._targetScrollX+0.5){this._finishedScrollX=this._targetScrollX}if(this._sourceScrollY>=this._targetScrollY-0.5&&this._sourceScrollY<=this._targetScrollY+0.5){this._finishedScrollY=this._targetScrollY}if(this._finishedX!=null&&this._finishedY!=null&&this._finishedScrollY!=null){this.welViewer.css({width:this._targetX+"px",height:this._targetY+"px"});if(this._runFunc){this._runFunc()}this._runFunc=null;this._finishedX=null;this._finishedY=null;this._finishedScrollX=null;this._finishedScrollY=null;this.oDrag.attachEvent();clearInterval(this.oTidMoveMotion)}},_getCalculatedScrollTop:function(a){if(a==null){return 0}if(a.documentElement.scrollTop+a.body.scrollTop==a.documentElement.scrollTop){return a.documentElement.scrollTop}return a.body.scrollTop},display:function(){this.closeSafeLayer();var b=this;var a=this.img=new Image();if(this.tid){clearTimeout(this.tid)}if(this.tidTimeout){clearTimeout(this.tidTimeout)}if(this.oTid_initialFunction){clearTimeout(this.oTid_initialFunction)}if(this.oTid_imageLoadFunction){clearTimeout(this.oTid_imageLoadFunction)}if(this.oTidMoveMotion){clearInterval(this.oTidMoveMotion)}this._bPrevButton=this._no==0?false:true;this._bNextButton=this._no>=this._count?false:true;this.setPreButtonStatus();this.setNextButtonStatus();this.elCountCurrentFrame.innerHTML=parseInt(this._no,10)+1;this.elCountTotalFrame.innerHTML=parseInt(this._count,10)+1;this.setImageLodingAfterDrawLoading($Fn(function(){var c=this.welViewer.visible()?parseInt(this.welViewer.css("top"),10):this._getCalculatedScrollTop(this.opt.target.document);var d=this.welViewer.visible()?parseInt(this.welViewer.css("left"),10):0;if(!this._oldWidth){this._oldWidth=this._imageWidthMin;this._oldHeight=this._imageHeightMin}var f={sourceX:this._oldWidth,sourceY:this._oldHeight,targetX:this._oldWidth,targetY:this._oldHeight,left:parseInt(this.welViewer.css("left"),10)||0};this._onMotionViewerReady(f,d,c)},this).bind(),$Fn(function(){var c=this.welViewer.visible()?parseInt(this.welViewer.css("top"),10):this._getCalculatedScrollTop(this.opt.target.document);var d=this.welViewer.visible()?parseInt(this.welViewer.css("left"),10):0;a.onload=function(){this.__width=this.width;this.__height=this.height;if(b.tidTimeout){clearTimeout(b.tidTimeout)}b._orginalViewFlag=(this.width>=b.opt.imageMax[0]||this.height>=b.opt.imageMax[1]?true:false);setTimeout($Fn(b.doOrginalViewDisplayReset,b).bind(),100);if(b.opt.imageMax[0]!=0&&b.opt.imageMax[1]!=0){b.setResizeImage(this,b.opt.imageMax[0],b.opt.imageMax[1])}var f=this.width<b._imageWidthMin?b._imageWidthMin:this.width+6;var g=this.height<b._imageHeightMin?b._imageHeightMin:this.height;var j=b.getPosCenter(f,g);b._nObj.width=f;b._nObj.height=g;if(!b._oldWidth){b._oldWidth=b._imageWidthMin;b._oldHeight=b._imageHeightMin}var k={sourceX:b._oldWidth,sourceY:b._oldHeight,targetX:f,targetY:g,left:parseInt(b.elViewer.style.left,10)};var h=$Fn(function(){b.setDraw(this)},this).bind();b._onMotionViewerReady(k,d,c,h);b._oldWidth=f;b._oldHeight=g;this.onload=function(){}};this.tidTimeout=setTimeout($Fn(function(){if(b.elViewer.style.display=="none"){var f=300;var g=300;var h=b.getPosCenter(f,g);$Element(b.elViewer).css({width:f+"px",height:g+"px",left:h.left+"px",top:50+this._getCalculatedScrollTop(document)+"px"});$Element(b.elViewer).css({display:"block"})}b.setDraw({src:"http://blogimgs.naver.com/blog20/blog/layout_photo/viewer/img_no_photo2.gif",width:140,height:140})},this).bind(),2000);a.src=this._ref[this._no]},this).bind())},openSafeLayer:function(){var a=$Agent().navigator();if(!(a.ie&&(a.version=="6"||a.version=="5.5"))){return}setTimeout($Fn(function(){if(this.elSafeIframe){this.closeSafeLayer()}this.elSafeIframe=this.opt.target.document.createElement("iframe");this.elSafeIframe.width=this.elViewer.offsetWidth+"px";this.elSafeIframe.height=(this.elViewer.offsetHeight+35)+"px";this.elSafeIframe.frameBorder="0";$Element(this.elSafeIframe).css({overflow:"hidden",position:"absolute",top:"0",left:"0"});this.elViewer.insertBefore(this.elSafeIframe,this.elViewer.firstChild)},this).bind(),100)},closeSafeLayer:function(){var a=$Agent().navigator();if(!(a.ie&&(a.version=="6"||a.version=="5.5"))){return}if(!this.elSafeIframe){return}this.elSafeIframe.parentNode.removeChild(this.elSafeIframe);this.elSafeIframe=null},doOrginalView:function(c,b){var a="";if(b){if(b=="disabled"){a="none";if(c.layerX=="undefined"||c.layerY=="undefined"){a="block"}}else{if(b=="enabled"){a=this._orginalViewFlag==true?"block":"none"}}$Element(this.elViewerOriginalButton).css({display:a,cursor:this.getCursorStyle()})}else{this.doOpenPopup()}},doOrginalViewDisplayReset:function(){$Element(this.elViewerOriginalButton).css({display:this._orginalViewFlag==true?"block":"none"})},setDraw:function(a){this.elViewerImgFrame.innerHTML="<table width=100% height=100% cellspacing=0 cellpadding=0 border=0><tr><td align=center valign=middle><img id='photoview' src='"+a.src+"' width='"+a.width+"' height='"+a.height+"' align=absmiddle></td></tr></table>";this.openSafeLayer()},setImageLodingAfterDrawLoading:function(a,b){if(this.oTid_initialFunction){clearTimeout(this.oTid_initialFunction)}if(this.oTid_imageLoadFunction){clearTimeout(this.oTid_imageLoadFunction)}this.elViewerImgFrame.innerHTML="<table style='width:100%;height:100%;text-align:center'><tr><td align=center valign=middle><table style='width:100%;height:100%;text-align:center;'><tr><td style='width:100%;height:100%;text-align:center;'><div class=\"loading_layer\" style='width:150px;height:34px;text-align:center;'>사진을 불러오는 중...</div></tr></table></td></tr></table>";this.oTid_initialFunction=setTimeout(a,10);this.oTid_imageLoadFunction=setTimeout(b,30)},chkMouseClick:function(d){var g=this.welViewer.offset();var b=g.left;var f=g.top;var a=b+this.elViewer.offsetWidth;var c=f+this.elViewer.offsetHeight;if(b<=e.page_x&&a>=e.page_x&&f<=e.page_y&&c>=e.page_y){}else{this.doClose()}},_setResizeImage:function(c,b,a){if(!b){b=this._def.oLimitSize.width}if(!a){a=this._def.oLimitSize.height}if((c.width/c.height)>=(b/a)&&c.width>b){c.height=(c.height*b)/c.width;c.width=b}else{if((c.width/c.height)<(b/a)&&c.height>a){c.width=(c.width*a)/c.height;c.height=a}}},setResizeImage:function(c,b,a){this._setResizeImage(c,b,a)},getPosCenter:function(a,g){if(window.innerWidth){_width=this.opt.target.window.innerWidth}else{if(this.opt.target.document.documentElement.clientWidth!=0){_width=this.opt.target.document.documentElement.clientWidth}else{_width=this.opt.target.document.body.clientWidth}}var c=window.innerHeight?this.opt.target.window.innerHeight:this.opt.target.document.documentElement.clientHeight;var f=this._getCalculatedScrollTop(this.opt.target.document);var h=$Agent().navigator();if(h.ie&&h.version=="5.5"){_width=top.document.body.clientWidth}var b=_width/2-(a/2)+this.opt.target.document.documentElement.scrollLeft;if(b<0){b=0}var d=parseInt(this._marginTop,10)+f;return{left:b,top:d}},appendViewerDiv:function(){var c=$Agent().navigator();this.elViewer=$("<div>");this.welViewer=$Element(this.elViewer);this.welViewer.attr("id","photoviewer");this.welViewer.className("photo_view");this.welViewer.css({position:"absolute",display:"none",top:this._marginTop,left:"100px",width:"200px",height:"200px",zIndex:"1000",cursor:this.getCursorStyle()});var a=this.opt.target.document.body;if(a.firstChild){a.insertBefore(this.elViewer,a.firstChild)}var b=[];b.push('<div class="view_top"><h3><img src="http://blogimgs.naver.com/blog20/blog/layout_photo/viewer2/lg_photoviewer.gif" width="133" height="31" alt="NAVER PHOTO VIEWER"></h3>');b.push('<div class="tab_navi">');b.push('<p class="btn_left"><a href="#" class="_btn_left" ><img src="http://blogimgs.naver.com/blog20/blog/layout_photo/viewer2/btn_left.gif" width="31" height="21" alt="이전"></a></p>');b.push('<p class="btn_right"><a href="#" class="_btn_right" ><img src="http://blogimgs.naver.com/blog20/blog/layout_photo/viewer2/btn_right.gif" width="32" height="21" alt="다음"></a></p></div>');b.push('<div class="photo_count"><strong><span class="current"></span></strong>&nbsp;/&nbsp;<span class="total"></span></div></div>');b.push('<div class="photo_album">');b.push("<p></p>");b.push('<a href="#" title="원본보기" class="btn_original" onclick="return false"><img src="http://blogimgs.naver.com/blog20/blog/layout_photo/viewer2/btn_original2.png" width="80" height="80" alt="원본보기"></a>');b.push('<div class="photo_shadow"></div>');b.push("</div>");b.push('<div class="btn_close"><a href="#" class="_btn_close" ><img src="http://blogimgs.naver.com/blog20/blog/layout_photo/viewer2/btn_close.gif" width="23" height="22" alt="닫기"></a></div>');b.push('<iframe style="display:block;position:absolute;visibility:hidden;width:0px;height:0px;" title="빈프레임"></iframe>');this.elViewer.innerHTML=b.join("");this.elViewerTopFrame=$$.getSingle(".view_top",this.elViewer);if(!c.IE){this.elViewerTopFrame.getElementsByTagName("h3")[0].style.marginBottom="-6px"}this.elViewerImgFrame=$$.getSingle(".photo_album > p",this.elViewer);this.welTabNaviFrame=$Element($$.getSingle(".tab_navi",this.elViewer));this.welPhotoCountFrame=$Element($$.getSingle(".photo_count",this.elViewer));this.elCountCurrentFrame=$$.getSingle(".current",this.elViewer);this.elCountTotalFrame=$$.getSingle(".total",this.elViewer);this.elNdsIframe=this.elViewer.getElementsByTagName("iframe")[0]},getButtonDiv:function(){var c=this.elViewerCloseButton=$$.getSingle(".btn_close",this.elViewer);this.elViewerPrev=$$.getSingle(".btn_left",this.elViewer);var a=this.elViewerPrevButton=this.elViewerPrev.getElementsByTagName("a")[0];$Element(a).css({cursor:this.getCursorStyle()});this.elViewerNext=$$.getSingle(".btn_right",this.elViewer);var b=this.elViewerNextButton=this.elViewerNext.getElementsByTagName("a")[0];$Element(b).css({cursor:this.getCursorStyle()});this.elViewerOriginalButton=$$.getSingle(".btn_original",this.elViewer);$Element(this.elViewerOriginalButton).css({display:"none",cursor:this.getCursorStyle()});this.elViewer.appendChild(c)},appendDragging:function(){var a=$("head-skin");this.oDrag=new jindo.DragArea(document.body,{sClassName:"view_top",bFlowOut:false}).attach({dragStart:function(c){var b=c.elDrag;b=$$.test(b,"! #photoviewer")?b:$$.getSingle("!  #photoviewer",b);c.elDrag=b},beforeDrag:function(b){b.elFlowOut=a}});this.oDrag.detachEvent();$Element(this.elViewerTopFrame).css({cursor:"move"})},unload:function(){this.doClose()},doOpenPopup:function(){var b=(window.screen.width/2)-(this.img.__width/2);var d=(window.screen.height/2)-(this.img.__height/2);if(d<0){d=10}if(b<0){b=10}var a=(window.screen.width<this.img.__width||window.screen.height<this.img.__height?"yes":"no");var c=window.open(this.opt.popupurl+"/viewer.jsp?src="+encodeURIComponent(this.img.src),"imageviewer","width="+this.img.__width+",height="+this.img.__height+",left="+b+",top="+d+",directories=no,location=no,menubar=no,scrollbars="+a+",status=no,toolbar=no,resizable=yes")}});var mlayoutPhoto=new postCommon.PhotoImageViewer({target:window,popupurl:"http://blog.naver.com/storyphoto"});var popview=function(c,a){var b="";var f=$Element(c);var d=[];if(typeof c=="string"){b=c}else{if(typeof c=="object"&&c.parentNode!="undefined"&&c.src!="undefined"){d=f.parent(function(g){return g.$value().tagName.toLowerCase()=="a"});if(d.length>0){return}else{b=c.src}}}popview2(b,a)};var popview2=function(g,b){if(window.location.protocol=="https:"){var f=/((beta\.)?(blogfiles|postfiles)(\d{1,2})?.(pstatic).net)\.*/;var d=g.match(f);if(d&&d[0]&&d[1]){var a=d[2]?d[2]+"blogfiles.pstatic.net":"blogfiles.pstatic.net";g=g.replace(d[1],a).replace(/\?.*/,"")}}else{var c=/((beta\.)?(blogfiles|postfiles)(\d{1,2})?.(naver).net)\.*/;var d=g.match(c);if(d&&d[0]&&d[1]){var a=d[2]?d[2]+"blogfiles.naver.net":"blogfiles.naver.net";g=g.replace(d[1],a).replace(/\?.*/,"")}}mlayoutPhoto.doPlayer([g],0,!!b);if(!b){return}if(location.href.indexOf("/MemologPost")>-1){utility.writeNewLcs(b,"sti","blog_memo_image")}else{utility.writeNewLcs(b,"sti","blog_image")}};var NaverCommentStyleController=function(){var d=jindo.$Element;var c=jindo.$;var a=jindo.$$;var b=jindo.$Template;this.makeAndPutFontCss=function(f){var j=this._setFontInlineCssAndGetInfoMap(f);var h=this._generateFontCss(j);var g=f+"commentFontCss";this._initStyle(g);this._putCss(h,g)};this.makeAndPutCustomCss=function(g){var f="commentCustomCss";if(!g&&d(f)){return}var h=this._getCustomCssFromTemplate();this._putCss(h,f)};this._generateFontCss=function(l){var f="";var k="";for(var h in l){if(!l.hasOwnProperty(h)){continue}var g=this._makeFontUrl(l[h]);f+="@font-face {font-family:'"+h+"';font-style:normal;font-weight:normal;src:local('Helvetica Neue'),local('Apple SD Gothic Neo'),local(Dotum),local(돋움)}";f+="@font-face {font-family:'"+h+"';font-style:normal;font-weight:normal;src:url("+g+");}";var j=l[h].fontSize;k+=" ._font-name_"+h+" .u_cbox_name_area, ._font-name_"+h+" .u_cbox_text_wrap { font-family:'"+h+"' !important;font-size:"+j+"pt !important }"}return f+k};this._makeFontUrl=function(f){var l=itemImagesURL+"/outlinefont/";var j=f.fontId;var h=+j%100;var m=parseInt((+j%10000)/100);var g=h==0?"100":h;var k=m==0?"100":m;return l+g+"/"+k+"/"+f.fontName+".eot"};this._setFontInlineCssAndGetInfoMap=function(p){var m=d(p).queryAll("._eot_font");var h={};for(var k in m){var f=d(m[k]);var o=f.className();if(!o){continue}var l=/_font-name_([\d]+_[\d]+)/.exec(o);var g=l[1];if(!g||h[g]){continue}var n=g.split("_");var j=n[0];var q=n[1];h[g]={fontName:g,fontId:j,fontSize:q}}return h};this._putCss=function(h,f){var g=c(f);if(!h){return}if(!g){g=document.createElement("style");g.id=f;g.type="text/css";document.getElementsByTagName("head")[0].appendChild(g)}if(g.styleSheet){g.styleSheet.cssText=h}else{g.innerHTML=h}};this._initStyle=function(g){var f=d(g);if(!f){return}f.leave()};this._getCustomCssFromTemplate=function(){var h=d(a.getSingle("._naver_comment_skin_property .pcol2"));var j=d(a.getSingle("._naver_comment_skin_property .cline"));var f=d(a.getSingle("._naver_comment_skin_property .pcol3"));var g=d(a.getSingle("._naver_comment_skin_property .comment"));return b("naverCommentCustomCssTpl").process({comment:g.css("backgroundColor"),cline:j.css("borderBottomColor"),pcol2:h.css("color"),pcol3:f.css("color")})}};var NaverCommentController=$Class({$init:function(){this.paginationInfoMap={};this.keepScrollContainerIdMap={};this.disableContainerIdMapForPagingScroll={};this.naverCommentScriptLoaded;this.oUserProfileInfo;this.styleController=new NaverCommentStyleController();this.isSimpleType=false;this.styleController.makeAndPutCustomCss();this.isAutoFocus=false;if(gbIsPostCommentOpen&&paramLogNo){this._autoOpenComment()}},_autoOpenComment:function(){if(!firstPostIsAllOpenPost){firstPostIsAllOpenPost="false"}try{var a={blogNo:blogNo,ticketNo:"201",targetNo:paramLogNo,aFormation:["list","page","write"],isPostComment:true,nPageSize:50,sPageType:"default"};this.open(a)}catch(b){}},open:function(b,c){var a=this._getContainerId(b.ticketNo,b.targetNo);this.keepScrollContainerIdMap[a]=true;this.disableContainerIdMapForPagingScroll[a]=true;this._setAdditionalInfo(b)},_setAdditionalInfo:function(c){var b=this;var f=function(g){b.oMentionInfo=g;b._loadNaverCommentModule(c)};var d=function(){b._setMentionInfo(c,f)};var a=function(){b._setUserProfileInfo(c,d)};b._setTemplateId(c,a)},_setTemplateId:function(b,c){var a=this._getObjectId(b);new $Ajax("/NaverCommentTemplateIdAsync.nhn",{method:"post",onerror:function(){},onload:function(d){oResult=d.json();b.templateId=oResult.templateId;b.isMentionPossible=(b.templateId.indexOf("_pr")<0);c()}}).request({blogId:blogId,objectId:a})},_successfullyLoadedScript:function(){this.naverCommentScriptLoaded&&cbox&&cbox.Core&&cbox.Core.init},_setUserProfileInfo:function(b,c){if(this.oUserProfileInfo||!isLoggedIn){c();return}var a=this;new $Ajax("/NaverCommentUserInfoAsync.nhn",{method:"post",onerror:function(){},onload:function(d){a._onloadUserProfileInfo(d,b);c()}}).request({blogId:blogId,isSimpleType:a.isSimpleType})},_setMentionInfo:function(a,b){if(typeof naverCommentMentionController==="undefined"||!a.isMentionPossible){b();return}naverCommentMentionController(blogId,b)},_onloadUserProfileInfo:function(b,a){oResult=b.json();var d=oResult.profileType;var f=oResult.nickName;var c=oResult.fontName;this.isSimpleType=oResult.isSimpleType;this.oUserProfileInfo={profileType:d,nickname:f};if(d=="profile"){this.oUserProfileInfo.image=oResult.profileImageUrl}else{if(d=="personacon"){this.oUserProfileInfo.images=JSON.parse(oResult.personaconListJson)}}if(c){a.fontName=c}},_loadNaverCommentModule:function(b){var a=this._makeNaverCommentParam(b);if(this._successfullyLoadedScript()){cbox.Core.init(a);return}this._loadScript(a)},_loadScript:function(b){var a=this;window.__htCboxOption=b;var c=document.createElement("script");c.type="text/javascript";c.charset="utf-8";c.onreadystatechange=function(){if(c.readyState=="complete"||c.readyState=="loaded"){a.naverCommentScriptLoaded=true}};c.onload=function(){a.naverCommentScriptLoaded=true};c.onerror=function(){a.naverCommentScriptLoaded=false};c.src=b.sDomain+"/js/cbox.core.js?v="+Math.floor(new Date().getTime()/1200000);(document.head||document.getElementsByTagName("head")[0]).appendChild(c)},close:function(b,a){$Element(this._getContainerId(b,a)).hide()},_show:function(f,b,d){var a=this._getContainerId(f,b);var c=$Element(a);this._showHeader(c,d);c.show()},_showHeader:function(c,g){var f=c.query(".commentbox_header");var b=c.query(".commentbox_pagination");if(!f||!b||!g.oJson.result.count||!g.oJson.result.pageModel){return}var d=g.oJson.result.count.total;var a=g.oJson.result.pageModel.totalPages;if(d<20){$Element(f).hide()}else{$Element(f).show()}if(a==1){$Element(b).hide()}else{$Element(b).show()}},toggle:function(b,a){this.isSimpleType=a;if(this.isVisible(b.ticketNo,b.targetNo)){this.close(b.ticketNo,b.targetNo)}else{this.open(b)}},isVisible:function(d,c){var a=this._getContainerId(d,c);var b=$Element(a);return b.visible()},_getDivId:function(b,a){return"naverComment_"+b+"_"+a},_getContainerId:function(b,a){return"naverComment_"+b+"_"+a+"_ct"},_getObjectId:function(a){return a.blogNo+"_"+a.ticketNo+"_"+a.targetNo},_loginPopup:function(a){var b=idURLSecret+"/nidlogin.login?template=plogin&mode=form&url="+blogURL+"/ReloadTopAndReturnClose.nhn?blogId="+blogId+"%26logNo="+a+"%26isMemolog="+isMemolog;parent.open(b,"LoginForComment","width=205,height=208")},_getTargetScrollTop:function(b,a){if(b){var c=$Element(a).parent().query("._cmtList");return this._absoluteOffsetTop(c)}return window.pageYOffset||(document.documentElement||document.body).scrollTop},_getTargetScrollLeft:function(a){if(a){return 0}return window.pageXOffset||(document.documentElement||document.body).scrollLeft},_makeNaverCommentParam:function(c){var j=this;var l=j._getDivId(c.ticketNo,c.targetNo);var b=c.commentNoPosition!=null?c.commentNoPosition:"";var k=j._getObjectId(c);var d=j._getContainerId(c.ticketNo,c.targetNo);var g=c.bIsAutoFocus;var f=j._getTargetScrollTop(g,d);var a=j._getTargetScrollLeft(g);var h=(function(){try{return window.top.location.href.indexOf("blog.naver.com")<0?"utf-8":"euc-kr"}catch(m){return"utf-8"}})();return{sId:l,sDomain:naverCommentStaticURL,sApiDomain:naverCommentApiURL,bLogin:isLoggedIn,sTicket:"blog",sObjectId:k,sLanguage:"ko",sGroupId:c.blogNo,sCommentNo:b,sLikeItId:c.sLikeItId,bManager:blogOwner,aFormation:c.aFormation,sCharset:h,sDateFormat:"Y.m.d. H:i",bUseAgo:false,bShowReply:true,sProfileImageParam:"type=s40",sTemplateId:c.templateId,nPageSize:c.nPageSize,sCssId:"blog",sProfileActionType:"NEW_WINDOW",fLoginHandler:function(m){if(!c.isPostComment){loginObj.popUpLogin("parent replace");return}j._loginPopup(c.targetNo)},fCommentItemHandler:function(m){if(!m.extension){return}m.className="_eot_font _font-name_"+m.extension},vProfileHandler:function(m){if(m.id){return mylogURL+"/"+m.id}else{if(m.userHomepageUrl){return m.userHomepageUrl}}},htMessage:{template:{list_empty:"댓글이 없습니다.<br>첫번째 댓글을 남겨주세요.",write_reply_placeholder:"답글을 입력해주세요.",write_long_placeholder:function(m){if(m.mention){return"블로그가 더 훈훈해지는 댓글 부탁드립니다. @별명을 입력하면 서로이웃이 소환됩니다."}else{return"블로그가 더 훈훈해지는 댓글 부탁드립니다. 불쾌감을 주는 욕설과 악플은 삭제될 수 있습니다."}},secret_reply:"비밀 댓글입니다.",editor:"블로그주인",mention:"소환"},alert:{mention_edit_confirm:"댓글 수정시 @소환이 해제됩니다. 계속 진행하시겠습니까?\n(소환기능은 Internet Explorer 9.0, Android 4.0 이상의 환경에서, 전체공개글 일때 가능합니다)",secret_mention_confirm:"댓글 내용 중 @소환이 있는경우,\n비밀로 등록할 수 없습니다.\n일반 댓글로 등록하시겠습니까?"}},htErrorHandler:{"3200":"댓글을 등록할 수 없습니다.\n이 블로그의 댓글쓰기가 차단되었습니다."},htEventHandler:{beforeCreate:function(m){var n=c.fontName;if(n){var o=m.htParams;o.extension=n}},afterList:function(m){j.styleController.makeAndPutFontCss(l);j._initPagination(l,d);j._focusToCommentTop(j,l,d)},afterReplyList:function(m){j.styleController.makeAndPutFontCss(l)},loadList:function(m){j._show(c.ticketNo,c.targetNo,m)},afterCreate:function(m){j.styleController.makeAndPutFontCss(l);j._show(c.ticketNo,c.targetNo,m);j._initPagination(l,d)},afterRemove:function(m){j._show(c.ticketNo,c.targetNo,m);j._initPagination(l,d)},initialized:function(){if(b){return}window.scrollTo(a,f)},afterImageLoadFinished:function(){if(!j.keepScrollContainerIdMap[d]||b){return}window.scrollTo(a,f);j.keepScrollContainerIdMap[d]=false}},htUserInfo:j.oUserProfileInfo,htMentionOption:j.oMentionInfo}},_focusToCommentTop:function(a,c,b){if(a.disableContainerIdMapForPagingScroll[b]){a.disableContainerIdMapForPagingScroll[b]=false;return}var d=$Element(b).parent().query("._cmtList");window.scrollTo(0,a._absoluteOffsetTop(d))},_absoluteOffsetTop:function(a){if(!a){return 0}var b=0;do{b+=a.offsetTop||0;a=a.offsetParent}while(a);return b},_initPagination:function(b,a){if(!$Element(a).query("._naverCommentHeader")){return}if(!cbox.Interface.pagination){return}var c=cbox.Interface.pagination(b);this._setPageInfo(a,c);if(this.paginationInfoMap[a]){this.paginationInfoMap[a]=c;return false}this._addPaginationEvent(c,a);this.paginationInfoMap[a]=c},_setPageInfo:function(a,c){if(!c){c=this.paginationInfoMap[a]}var b=$Element(a).query(".commentbox_pagination");if(!b||!$Element(b).visible()){return}var d=c.currentPage();var f=c.totalPage();$Element(a).query("._currentPageNo").innerHTML=d;$Element(a).query("._lastPageNo").innerHTML=f;if(d==1){this._disablePageNavigator($Element(a).query("._naverCommentPrev"))}else{this._enablePageNavigator($Element(a).query("._naverCommentPrev"))}if(d==f){this._disablePageNavigator($Element(a).query("._naverCommentNext"))}else{this._enablePageNavigator($Element(a).query("._naverCommentNext"))}},_addPaginationEvent:function(f,c){var a=this;var g=$Element(c).query("._naverCommentWriteBtn");var d=$Element(c).query("._naverCommentPrev");var b=$Element(c).query("._naverCommentNext");if(!g&&!d&&!b){return}if(g){$Fn(a._doClick,this).attach(g,"click",true)}if(d){$Fn(a._doClick,this).attach(d,"click",false)}if(b){$Fn(a._doClick,this).attach(b,"click")}},_doClick:function(b){var c=b.element;var a=$Element(cssquery.getSingle("!a",c)?cssquery.getSingle("!a",c):c);var d=paramUtil.getParam(a&&a.className()!=""?a.className():c.className);if(a.hasClass("_naverCommentWriteBtn")){this._goWrite(d[0],d[1],b)}else{if(a.hasClass("_naverCommentPrev")){this._prevPage(d[0])}else{if(a.hasClass("_naverCommentNext")){this._nextPage(d[0])}}}},_goWrite:function(b,a,c){this.keepScrollContainerIdMap[a]=false;this.disableContainerIdMapForPagingScroll[a]=false;var f=$(b+"__write_textarea");if(!f){return}f.focus();var d=this._findWriteEl(b,f);this._scrollToCenter(d);c.stop()},_findWriteEl:function(b,d){var c=$A($Element(b).queryAll(".u_cbox_write_wrap"));if(!c||c.length()<1){return}var a;c.forEach(function(g){var f=$Element(g);if(f&&f.isParentOf($(d))){a=g}});return a},_scrollToCenter:function(d){var b=this._absoluteOffsetTop(d);var c=parseInt((window.innerHeight||document.documentElement.clientHeight)/2);var a=parseInt(d.offsetHeight/2);if(b&&c&&a){window.scrollTo(0,b-c+a)}},_prevPage:function(a){this.disableContainerIdMapForPagingScroll[a]=true;var b=this.paginationInfoMap[a];this._setPageInfo(a,b);if(b.currentPage()==1){return}b.prev()},_nextPage:function(a){this.disableContainerIdMapForPagingScroll[a]=true;var b=this.paginationInfoMap[a];this._setPageInfo(a,b);if(b.currentPage()==b.totalPage()){return}b.next()},_disablePageNavigator:function(a){if(!a){return}$Element(a).addClass("dimmed")},_enablePageNavigator:function(a){if(!a){return}$Element(a).removeClass("dimmed")}});var naverCommentController=new NaverCommentController();function NaverCommentMentionController(){var a=this;a.cachedMentionInfoList;a.loadMentionInfoList=function(b,c){new $Ajax("/NaverCommentMentionInfoListAsync.nhn",{method:"post",onload:function(d){if(d&&d._response){if(c){var f={profiles:d.json(),message:{guide:"@블로그별명 입력 시, 서로이웃이 소환됩니다.",empty:"서로이웃을 소환할 수 있습니다."},useMentionButton:true,buttonGuide:{message:"이제 PC 전체공개글에서도 나의 서로이웃을 소환해 보세요.",expire:365}};a.cachedMentionInfoList=f;c(f)}}}}).request({blogId:b})};return function(c,d){var b=a.cachedMentionInfoList;if(b){if(d){d(b)}return}a.loadMentionInfoList(c,d)}}var naverCommentMentionController=new NaverCommentMentionController();var serviceId="naver_blog";var hitType="cv";var nilForBlogCVAnalyst=$Class({$init:function(j,h,g,f,d,c,b,a){this._blogId=j;this._uri=h;this._relationType=+g;this._gdid=f;this._dimension_1=d;this._referrer=c;this._referrerSet();this._optional_1=b;this._event_category=a;this._statAllowSet();this._relationTypeSet();if(this._relationType!="3"){this._start()}},_start:function(){nil.init(serviceId,this._blogId);nil.setDevMode(nilOptions.devMode);nil.add({gdid:this._gdid,dimension_1:this._dimension_1,optional_1:this._optional_1,referrer:this._referrer,uri:this._uri,user_type:this._relationType,hit_type:hitType});nil.send(hitType,this._event_category)},_relationTypeSet:function(){switch(this._relationType){case 0:this._relationType="3";break;case 1:this._relationType="2";break;case 2:this._relationType="1";break;default:this._relationType="0"}},_statAllowSet:function(){if(this._optional_1==true){this._optional_1="1"}else{this._optional_1="0"}},_referrerSet:function(){if(this._referrer.indexOf("proxyReferer=")>-1){var a=(this._referrer).match(/proxyReferer=([^&]*)/);if(a&&a[0]){this._referrer=decodeURIComponent(a[1])}}}});!function(){function ax(c){q&&q(c);var a;if("http:"!=Z.protocol&&"https:"!=Z.protocol){return !1}a=Z.protocol;var d=H?"dev."+Q:Q,b=new Image(1,1);return b.src=a+"//"+d+c,!0}function ai(){var b=[],a=-1;for(var c in W){b[++a]=c+"="+ar(W[c])}for(c in ae){b[++a]=c+"="+ar(ae[c])}return b[++a]="t="+(new Date).getTime(),b.join("&")}function an(c){var b=c.length;if(b<1){return 0}var d=c[0];switch(d){case"cv":aa=(new Date).getTime(),ak("cv",c[1],"","",""),ao(c[2],c[3]);break;case"leave":var a=aB();if(a<=0){return 0}ak("event","action","leave","",""+a),ao(c[5],c[6]),aa=null;break;case"event":ak("event",c[1],c[2],c[3],c[4]),ao(c[5],c[6]);break;case"relay":ak("relay",c[1],c[2],c[3],c[4]),ao(c[5],c[6])}return 1}function ak(f,c,g,d,b){ae.h=f||"",ae.ec=c||"",ae.ea=g||"",ae.el=d||"",ae.ev=b||""}function aB(){return null===aa?0:(new Date).getTime()-aa}function at(a){return"object"==typeof a}function am(a){return"string"==typeof a}function az(){W={},ae={}}function ah(b,a){var c=X.referrer?X.referrer:"";W.s=b,W.c=a,W.r=c}function ap(){var b;try{b=G.userLanguage||G.language||""}catch(a){}W.l=b,W.v=K}function aw(){var a=ay("og:url","content");a||(a=Z.href?Z.href:""),W.u=a,aj()}function ag(b){var a={};return b.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(f,g,d,c){a[g]=c}),a}function aj(){var f=window.location.search,c=ag(f),g={cds:"cd_source",cdt:"cd_type",cdc:"cd_contents",cdv:"cd_value"};for(var d in g){var b=g[d];d in c&&c[d]&&al(W,b,c[d])}}function ay(c,a){for(var d=document.getElementsByTagName("meta"),b=0;b<d.length;b++){if(d[b].getAttribute("property")===c){return d[b].getAttribute(a)}}}function av(a){an(a)&&(ax(ai()),ae={})}function ao(b,a){if(at(b)){for(var c in b){am(b[c])?al(W,c,b[c]):V[c]&&typeof b[c]==V[c]&&al(W,c,b[c].toString())}}am(b)&&am(a)&&al(W,b,a)}function al(h,m,f){var b={referrer:"r",gdid:"m",uri:"u",user_type:"f",cd_source:"cds",cd_type:"cdt",cd_contents:"cdc",cd_value:"cdv"};if(m in b){h[b[m]]=f}else{var k=m.split("_"),g=k.pop();if(!g.search(/0-9+/)){return}var d=k.join("_"),j={dimension:{limit:10,key:"d"},metric:{limit:10,key:"m"},optional:{limit:10,key:"o"},extra:{limit:10,key:"e"}};if(!(d in j)){return}var l=parseInt(g);if(l>j[d].limit){return}h[j[d].key+g]=f}}function aC(b,a){az(),ah(b,a),ap(),aw()}function au(a){q=a}function af(a){H=a}function ad(a){Q=a+"/m?"}function F(){var w=ag(window.location.search),C=w.NaPm;if(null!=C){for(var j=decodeURIComponent(C),b=j.split("|"),A={},m=0;m<b.length;m++){var h=b[m].split("=");2==h.length&&(A[h[0]]=h[1])}for(var y=A.tr,B=["sa","pla","ft","cd","brnd","pwrcnt"],k=!1,m=0;m<B.length;m++){var v=B[m];y==v&&(k=!0)}if(0!=k&&null!=A.ct&&""!=A.ct&&null!=A.ci&&""!=A.ci){var D=Math.round((new Date).getTime()/1000),x=btoa(Y({t:D,ct:A.ct,ci:A.ci,u:W.u,r:W.r})),p=C;aA("NA_SA",x,1728000),aA("NA_PM",p,1728000)}}}function Y(c){var a=[];for(var d in c){var b=encodeURIComponent(c[d]);a.push(d+"="+b)}return a.join("|")}function L(f){for(var c=f.split("|"),g={},d=0;d<c.length;d++){var b=c[d].split("=");2==b.length&&(g[b[0]]=decodeURIComponent(b[1]))}return g}function z(p){var C=p;if(null==p){return C}var h,b=/{NaPm}/i,y=/%7BNaPm%7D/i;if(b.test(p)){h=b}else{if(!y.test(p)){return C}h=y}var k=ab("NA_PM"),g="";k&&0==p.indexOf("http")&&(g="NaPm="+k),C=p.replace(h,g);var x=ab("NA_SAC"),B=ab("NA_SA"),j=document.cookie.replace(/(?:(?:^|.*;\s*)NNB\s*\=\s*([^;]*).*$)|^.*$/,"$1");if(""!=x){var m=L(atob(x));if(m.u==W.u&&m.r==W.r){return C}}if(null==B||""==B){return C}var A=L(atob(B)),D=Y({ci:A.ci,t:A.t,u:A.u,r:A.r,cnvType:"5",cnvValue:"1",c_t:Math.round((new Date).getTime()/1000),c_u:W.u,c_r:W.r,isDirect:"DC",wa:"b_"+W.c,nnb:j}),w=btoa(Y({u:W.u,r:W.r}));return aA("NA_SAC",w,1800),ao("extra_1",D),av(["relay","sa"]),delete W.e1,C}function aA(p,C,h){if(aq()){var b=1000;if(localStorage.length>=b){for(var y=localStorage.length,k=[],g=0;g<y;g++){var x=localStorage.key(g);if(0==x.indexOf(ac)){var B=localStorage.getItem(x);try{var j=JSON.parse(B);j.expire&&j.expire<(new Date).getTime()&&k.push(x)}catch(m){continue}}}for(var g=0;g<k.length;g++){var A=k[g];localStorage.removeItem(A)}}if(!(localStorage.length>=b)){var D=new Date;D.setTime(D.getTime()+1000*h);var x=ac+":"+p+":"+W.c,w={value:C,expire:D.getTime()};localStorage.setItem(x,JSON.stringify(w))}}}function ab(f){if(!aq()){return""}try{var c=ac+":"+f+":"+W.c,g=localStorage.getItem(c),d=JSON.parse(g);return d.expire&&d.expire<(new Date).getTime()?(localStorage.removeItem(c),""):d.value}catch(b){return""}}function aq(){var c="localStorage";try{var a=window[c],d="__storage_test__";return a.setItem(d,d),a.removeItem(d),!0}catch(b){return b instanceof DOMException&&(22===b.code||1014===b.code||"QuotaExceededError"===b.name||"NS_ERROR_DOM_QUOTA_REACHED"===b.name)&&0!==a.length}}var W={},ae={},K="1.0.7",G=window.navigator,Z=window.location,X=document,ar=(X.referrer,encodeURIComponent),Q=(window.java||self.java?java.awt.Toolkit.getDefaultToolkit():null,"nil.naver.com/m?"),H=!1,q=null,aa=null,V={cd_value:"number"},ac="niStorage";"undefined"==typeof nil&&(nil={}),nil.init=function(b,a){aC(b,a)},nil.add=function(b,a){ao(b,a)},nil.send=function(){av(arguments)},nil.callback=function(a){au(a)},nil.setDevMode=function(a){af(a)},nil.setTargetDomain=function(a){ad(a)},nil.send=function(b){function a(){b.apply(this,arguments),F()}return a}(nil.send),nil.send_sa_log=z}();if(typeof postCommon=="undefined"){var postCommon={}}postCommon.Tag=$Class({$init:function(){this.restrictedTagChars=tagNameValidator.restrictedTagChars;this.tagData=null;this.currentTarget=null;this.isAlreadySubmit=false},isTagname:function(a){return tagNameValidator.isTagname(a)},validateTagString:function(b){var a=b.replace(this.restrictedTagChars,"");re=/[\x2c]+/g;return a.replace(re,",")},absoluteTagString:function(b,h){var g=this.validateTagString(b);var f=g.split(",");var d="";var a=f.length;if(a>h){a=h}for(var c=0;c<a;c++){d=d+f[c]+","}d=this.validateTagString(d);d=d.substring(0,d.length-1);return d},check_tagsvalidate:function(a,b,j){var f=true;var d=$$.getSingle("~ div",b);var g=$$.getSingle("input",d);g.value=this.validateTagString(g.value);g.value=this.eliminateDuplicate(g.value);var h=g.value.split(",").length;if(j){j.call()}if(h.length==1&&h[0].length==0){g.focus();alert("태그를 입력해주세요");return false}if(h>10){alert("태그는 최대 10개 까지 입력이 가능합니다.");g.value=this.absoluteTagString(g.value,10);g.focus();return false}var k;var c=100;k=this.isValidateTagLength(g.value,c);if(!k){alert("태그는  100자 이상 입력할 수 없습니다.");g.focus();return false}return true},check_tagvalidate:function(a,c){var b=a.value;if(b.match(this.restrictedTagChars)!=null){b=b.replace(this.restrictedTagChars,"");a.value=b}var d=/[\x2c][\x2c]+/g;if(b.match(d)!=null){b=b.replace(d,",");a.value=b}if(c){c.call()}},eliminateDuplicate:function(b){var g=this.validateTagString(b);var f=g.split(",");var d="";for(var c=0;c<f.length;c++){for(var a=0;a<c;a++){if(f[a]==f[c]){f[c]=""}}d=d+f[c]+","}d=this.validateTagString(d);d=d.substring(0,d.length-1);return d},isValidateTagLength:function(a,c){var d=a.split(",");for(var b=0;b<d.length;b++){if(d[b].length>c){return false}}return true},getLogNoFromTagQuery:function(f){var c=[];if(!f){return c}var d=f.split("&");for(var b=0,a=d.length;b<a;b++){if(!d[b]){continue}c.push(d[b].replace(/logNo=/,""))}return c},loadTagInfo:function(a,f){var c=f||tagParam;var d=this.getLogNoFromTagQuery(c);var b="/BlogTagListInfo.nhn";new $Ajax(b,{method:"post",onerror:function(){},onload:$Fn(function(g){this.tagData=[];if(typeof g!="undefined"){try{var k=g.json();if(!k){return}k=k.taglist;this.tagData=k;if(a=="popup"){this.callbackSaveTagInfo(k)}else{if(a=="list"){if(k.length>0){for(i=0;i<k.length;i++){this.setTagList(k[i].logno,k[i].tagName,(k.length-1==i)?"resize":null,$("tagTopName_"+k[i].logno))}}}else{if(k.length>0){if(isMemolog){for(i=0;i<k.length;i++){this.setTagList(k[i].logno,k[i].tagName,(k.length-1==i)?"resize":null,$("tagTopName_"+k[i].logno))}}for(i=0;i<k.length;i++){if($("tagList_"+k[i].logno)!=null){$("tagList_"+k[i].logno).style.display=""}this.setTagList(k[i].logno,k[i].tagName,(k.length-1==i)?"resize":null,$("tagList_"+k[i].logno))}}}}}catch(h){var j=$$("div.post-tag[@display=block]");nCount=j.length;for(i=0;i<nCount;i++){$Element(j[i]).hide()}}}},this).bind()}).request({blogId:blogId,logNoList:d.join("|"),logType:(isMemolog?"memolog":"mylog"),utf8:"true"})},loadTagListTableInfo:function(a){this.loadTagInfo("list",a)},setTagList:function(h,s,n,b,o){var g=$Element(b);if(!g){return}var d=isMemolog?"memolog":"mylog";var m=false;var r=false;var l=utility.decodeURIComponentForJava(s).split(",");var q=o==undefined||o=="undefined"?s.split("%2C"):o.split("%2C");var a='&nbsp;<a href="#" class="_showTagEditBox _rosRestrict _tagRosRestrict _param(EDIT|'+h+') _returnFalse"><img src="'+imageURL+'/nblog/btn_edit_2.gif" width="23" height="11" alt="edit"/></a>';var k=[];if(g.$value()==$("tagTopName_"+h)){r=true;a='&nbsp;<a href="#" class="_showTagEditBox _rosRestrict _tagRosRestrict _param(EDIT|'+h+'|TOP) _returnFalse" ><img src="'+imageURL+'/nblog/btn_edit_2.gif" width="23" height="11" alt="edit"/></a>'}for(var p=0,c=l.length;p<c;p++){var t;var f;if(l[p]==""){m=true}else{t=l[p];f=q[p];k.push('<a href="/PostListByTagName.nhn?utf8=true&blogId='+blogId+"&logType="+d+"&tagName="+f+"\" class=\"tag pcol1 itemTagfont _setTop\" onclick=\"clickcr(this,'tag.list','','',event)\"><span>#"+t+"</span></a>")}}var j=utility.getParam(g.className());if(!isMemolog){if(blogOwner){k.push(a)}}else{if(blogOwner||j&&j[0]=="true"){k.push(a)}}g.html(k.join(""));if(!r&&!m){g.show()}},setTagForLogNo:function(c){for(var b=0,a=this.tagData.length;b<a;b++){if(this.tagData[b].logno==c[0].logno){this.tagData[b]=c[0];return}}this.tagData.push(c[0])},getTagForLogNo:function(a){for(var c=0,b=this.tagData.length;c<b;c++){if(this.tagData[c].logno==a){return utility.decodeURIComponentForJava(this.tagData[c].tagName)}}},showTagEditBox:function(b,h){var a=$$.getSingle("~ div",h);var g=$$.getSingle("input",a);var c=this.getTagForLogNo(b);var d=utility.trim(c);var f=utility.unescapeUnicode(d);g.value="#"+f.split(/[,\s#]+/g).join(", #");$Element(h).hide();$Element(a).show();g=a=h=null},hideTagEditBox:function(b,c){var a=$$.getSingle("~ div",c);if(c.id.indexOf("tagTopName_")==-1||!blogOwner){$Element(c).show()}else{$Element(c).css({display:""})}$Element(a).hide();a=c=null},saveTag:function(b,c){var a=true;a=this.check_tagsvalidate(b,c);if(a){this.realSaveTag(b,c)}},realSaveTag:function(b,f){var a=$$.getSingle("~ div",f);var d=$$.getSingle("input",a);var c=$("saveTagName");this.currentTarget=f;c.logNo.value=b;c.chtagname.value=encodeURIComponent(utility.trim(d.value));if(isMemolog){c.logType.value="memolog"}if(this.isAlreadySubmit){return}this.changeAlreadySubmitValue(true);c.submit();c=d=a=f=null},callbackSaveTagInfo:function(aTagList){this.changeAlreadySubmitValue(false);if(typeof(aTagList)=="string"){aTagList=eval("("+aTagList+")").taglist}if(aTagList.length>0){this.setTagForLogNo(aTagList);for(var i=0,nCount=aTagList.length;i<nCount;i++){var oTag=aTagList[i];if(this.currentTarget!=null){this.hideTagEditBox(oTag.logno,this.currentTarget)}this.setTagList(oTag.logno,oTag.tagName,"resize",$("tagList_"+oTag.logno));this.setTagList(oTag.logno,oTag.tagName,"resize",$("tagTopName_"+oTag.logno))}}},changeAlreadySubmitValue:function(a){this.isAlreadySubmit=a}});var postListTag=new postCommon.Tag();var AdPostList=$Class({$init:function(a,f,b,d,c){this.nLogNo=a;this.nDirectorySeq=f;this.nIndex=b;this.bOldPostOneWeek=d;this.sModifyDateValue=c}});var AdPostObject=$Class({sBlogId:"",sAdPostSecurityParam:"",oContentShareObject:null,bExistAdPost:false,bUseAdPostInSide:false,aPostList:[],nCategoryDirectorySeq:0,nFirstLogNo:"",bPreview:false,bPreviewContent:false,bPreviewSide:false,nAlign:0,nCount:3,sContentSpanIdPrefix:"adPostInjectArea_",sSideSpanIdPrefix:"adPostWidget",bRemoconPreview:false,addAdPostList:function(a,f,b,d,c){this.aPostList.push(new AdPostList(a,f,b,d,c))},isPrintPreview:function(){return this.bPreviewContent||this.bPreviewSide},cannotViewCase:function(){return !this.oContentShareObject&&this.bUseAdPostInSide},isShowAdPost:function(){return !this.bPreview&&this.bExistAdPost&&!this.cannotViewCase()},isCleanSideAdPost:function(){return !this.bExistAdPost&&this.oContentShareObject&&$(this.sSideSpanIdPrefix)&&!this.bPreview}});var AdPostInject=$Class({oAdPost:null,$init:function(a){this.oAdPost=a},injectAdPost:function(){if(this.oAdPost.oContentShareObject){this._setAttributes();if(this.oAdPost.isPrintPreview()){this._preview();return}}this._injectAdPost();this._cleanSideAdPost()},_setAttributes:function(){this.oAdPost.bPreview=this.oAdPost.oContentShareObject.adPostPreview;this.oAdPost.bPreviewContent=this.oAdPost.oContentShareObject.adPostPreviewContent;this.oAdPost.bPreviewSide=this.oAdPost.oContentShareObject.adPostPreviewSide;this.oAdPost.nAlign=this.oAdPost.oContentShareObject.adPostAlign;this.oAdPost.nCount=this.oAdPost.oContentShareObject.adPostCount},_preview:function(){new $Ajax("/AdPostInjectPreviewAsync.nhn",{method:"POST",onload:$Fn(function(a){this._onLoadPreview(a)},this).bind()}).request({blogId:this.oAdPost.sBlogId,adPostArea:this.oAdPost.bPreviewSide?"1":"0",adPostAlign:this.oAdPost.nAlign,adPostCount:this.oAdPost.nCount})},_onLoadPreview:function(a){if(this.oAdPost.bPreviewSide&&parent.$(this.oAdPost.sSideSpanIdPrefix)){parent.$(this.oAdPost.sSideSpanIdPrefix).innerHTML=a.text()}else{if(this.oAdPost.bPreviewContent){var c=this.oAdPost.sContentSpanIdPrefix+this.oAdPost.nFirstLogNo;var b=this.oAdPost.bRemoconPreview?parent.$(c):$(c);if(b){b.innerHTML=a.text()}}}},_getTopReferer:function(){if(parent.g_ShareObject){return parent.g_ShareObject.referer}if(parent.parent.g_ShareObject){return parent.parent.g_ShareObject.referer}return encodeURIComponent(document.referrer)},_injectAdPost:function(){if(this.oAdPost.isShowAdPost()){new $Ajax("/AdPostInjectAsync.nhn",{method:"POST",onload:$Fn(function(a){this._onLoadADInject(a)},this).bind()}).request(this._getInjectParams())}},_getInjectParams:function(){var c={};c.blogId=this.oAdPost.sBlogId;c["adPostInjectSecurity.sp"]=this.oAdPost.sAdPostSecurityParam;c["configure.adCount"]=this.oAdPost.nCount;c["configure.adAlign"]=this.oAdPost.nAlign;c["configure.categoryDirectorySeq"]=this.oAdPost.nCategoryDirectorySeq;c["configure.topReferer"]=this._getTopReferer();c["configure.requestReferer"]=encodeURIComponent(document.referrer);for(var b=0;b<this.oAdPost.aPostList.length;b++){var a=this.oAdPost.aPostList[b];c["configure.adPostInjectParams["+a.nIndex+"].logNo"]=a.nLogNo;c["configure.adPostInjectParams["+a.nIndex+"].directorySeq"]=a.nDirectorySeq;c["configure.adPostInjectParams["+a.nIndex+"].oldPostOneWeek"]=a.bOldPostOneWeek}return c},_onLoadADInject:function(b){if(b.text().indexOf('"logNo"')>-1){var f=b.json();for(var a=0;a<f.length;a++){if(this.oAdPost.oContentShareObject&&f[a].inSide&&$(this.oAdPost.sSideSpanIdPrefix)){$(this.oAdPost.sSideSpanIdPrefix).innerHTML=f[a].content}else{if(f[a].inPost){var d=this.oAdPost.sContentSpanIdPrefix+f[a].logNo;var c=$Element($(d));if(c){c.html(f[a].content)}}}}if(f.length==0&&this.oAdPost.oContentShareObject&&$(this.oAdPost.sSideSpanIdPrefix)){$Element($(this.oAdPost.sSideSpanIdPrefix)).html("")}}},_cleanSideAdPost:function(){if(this.oAdPost.isCleanSideAdPost()){$Element(parent.$(this.oAdPost.sSideSpanIdPrefix)).html("")}}});var InstallBlogAppPush=$Class({$init:function(){$Fn(this._onClick,this).attach(document,"click")},_onClick:function(b){var c=b.element;var a=$Element($$.getSingle("!a",c)?$$.getSingle("!a",c):c);var d;if(typeof(paramUtil)!="undefined"){d=paramUtil.getParam(a.className())}else{d=utility.getParam(a.className())}if(a.hasClass("_installBlogAppPush")){this._push(d,false)}else{if(a.hasClass("_installBlogAppPushClose")){this._closeLayer(d)}else{if(a.hasClass("_installBlogAppPushRetry")){this._push(d,true)}}}if(a.hasClass("_stopIntallAppEvent")){b.stop()}},_push:function(c,b){var d="";var a=c[0];if(c.length>=2){d=c[1]}if(a=="true"){this._callPush(d,b)}else{this._login()}},_login:function(){var a=encodeURI("http://"+location.host+"/ReloadOpenerAndClose.nhn");window.open("https://nid.naver.com/nidlogin.login?mode=form&svctype=64&url="+a,"login","width=400,height=260,location=no,resizable=no")},_callPush:function(b,a){new $Ajax("/InstallBlogAppPushAsync.nhn",{method:"POST",onload:$Fn(function(c){this._showLayer(c,b,a)},this).bind()}).request()},_showLayer:function(a,c,b){if(a.text()=="success"){$Element("installBlogAppPush"+c).show();$Fn(this._hideInstallBlogAppPushNews,this).attach($$("#myBlogNews ._installBlogAppPushClose"),"keydown");if(b){alert("알림을 다시 전송했습니다.")}}else{if(a.text()=="login"){this._login()}else{alert("일시적인 문제로 접속 할 수 없습니다. 잠시 후 다시 시도해주세요.")}}},_closeLayer:function(a){var b="";if(a.length>=2){b=a[1]}$Element("installBlogAppPush"+b).hide()},_hideInstallBlogAppPushNews:function(a){if(a.key().keyCode!=13){return}$Element("installBlogAppPushNews").hide();$("installBlogAppPush").focus();a.stop()}});if(typeof(window.defineNHNJS)=="undefined"){window.defineNHNJS={}}window.defineNHNJS["PostBottomCommon_utf8-1198224523_js"]=true;